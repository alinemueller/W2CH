!function a(i,c,f){function u(t,e){if(!c[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=c[t]={exports:{}};i[t][0].call(o.exports,function(e){return u(i[t][1][e]||e)},o,o.exports,a,i,c,f)}return c[t].exports}for(var s="function"==typeof require&&require,e=0;e<f.length;e++)u(f[e]);return u}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.tasks=void 0;n.tasks=[{_id:"01e0ba3c-0693-4017-9401-3ab6f017ad1e",title:"Mietvertrag der neuen Wohnung unterzeichnen",days:90,days_after_move:0,_owner:"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2",state:"default",_updatedDate:"2018-11-30T12:45:22.056Z",_createdDate:"2018-11-30T12:45:22.056Z"},{_id:"5b8462d9-4321-436f-a6cf-39cc3502f79d",title:"Form- und fristgerecht alte Wohnung kündigen",days:90,days_after_move:0,_owner:"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2",_updatedDate:"2018-11-30T12:45:22.055Z",_createdDate:"2018-11-30T12:45:22.055Z"},{_id:"a274c55a-9fef-4e37-a83f-32e541fd1e2b",title:"Nachmieter suchen",days:90,days_after_move:0,_owner:"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2",_updatedDate:"2018-11-30T12:45:22.054Z",_createdDate:"2018-11-30T12:45:22.054Z"},{_id:"c02a0480-7918-4600-8b8e-246f075b5e9a",title:"Auszugstermin mit altem Vermieter besprechen/vereinbaren",days:90,days_after_move:0,_owner:"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2",_updatedDate:"2018-11-30T12:45:22.053Z",_createdDate:"2018-11-30T12:45:22.053Z"},{_id:"c279ba1b-afe7-4e82-9d74-ea3858acdb10",title:"Einzugstermin mit neuem Vermieter besprechen/vereinbaren",days:90,days_after_move:0,_owner:"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2",_updatedDate:"2018-11-30T12:45:22.052Z",_createdDate:"2018-11-30T12:45:22.052Z"},{_id:"c5cb79ec-77dc-41e7-b5d5-38e0486d7710",title:"Ggf. Sonderurlaub bei Arbeitgeber einreichen",days:90,days_after_move:0,_owner:"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2",_updatedDate:"2018-11-30T12:45:22.051Z",_createdDate:"2018-11-30T12:45:22.051Z"},{_id:"bdbdf93b-a290-45df-8652-3e4a31742a17",title:"Entscheiden, ob man für die Endreinigung der Wohnung ein Reinigungsinstitut beauftragt oder die Wohnung selbst putzt",days:90,days_after_move:0,_owner:"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2",_updatedDate:"2018-11-30T12:45:22.050Z",_createdDate:"2018-11-30T12:45:22.050Z"},{_id:"3e889799-a541-48d9-a918-aa07770ddc16",title:"Entscheiden, ob man für den Umzug ein Umzugsunternehmen beauftragt oder den Umzug selbst durchführt",days:90,days_after_move:0,_owner:"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2",_updatedDate:"2018-11-30T12:45:22.049Z",_createdDate:"2018-11-30T12:45:22.049Z"},{_id:"b545f00a-ccd7-447a-aa50-26137d4300bf",title:"Ggf. weitere Umzugshelfer organisieren",days:90,days_after_move:0,_owner:"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2",_updatedDate:"2018-11-30T12:45:22.048Z",_createdDate:"2018-11-30T12:45:22.048Z"},{_id:"69ffae68-5ee5-4d78-ac71-b7469e765df1",title:"Offerten bei Umzugsunternehmen und/oder Reinigungsinstitut einholen",days:90,days_after_move:0,_owner:"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2",_updatedDate:"2018-11-30T12:45:22.047Z",_createdDate:"2018-11-30T12:45:22.047Z"},{_id:"82d51fde-f1ce-48fe-af71-0a45234028b3",title:"Neue Wohnung ausmessen, bzw. Grundrissplan für die neue Wohnung anfordern",days:90,days_after_move:0,_owner:"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2",_updatedDate:"2018-11-30T12:45:22.046Z",_createdDate:"2018-11-30T12:45:22.046Z"},{_id:"841f56b1-7d4a-4255-8822-fb01d95b2e4e",title:"Einrichtung der neuen Wohnung planen",days:90,days_after_move:0,_owner:"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2",_updatedDate:"2018-11-30T12:45:22.045Z",_createdDate:"2018-11-30T12:45:22.045Z"},{_id:"05287b73-f471-43d4-bf1c-2c209739b3b2",title:"Ggf. Neuanschaffungen an neue Adresse bestellen",days:90,days_after_move:0,_owner:"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2",_updatedDate:"2018-11-30T12:45:22.044Z",_createdDate:"2018-11-30T12:45:22.044Z"},{_id:"41966bff-d377-40af-b353-fff0bc0a95f7",title:"Mitgliedschaften und Abos kündigen, bzw. über Umzug informieren (z.b. Vereine, Zeitschriften, Kundenkarten)",days:90,days_after_move:0,_owner:"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2",_updatedDate:"2018-11-30T12:45:22.043Z",_createdDate:"2018-11-30T12:45:22.043Z"}]},{}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(n,"__esModule",{value:!0}),n.add=function(e,t,n,r){var o=c=new n,a=f=new t,i=new r;return a.init(),u[e]={model:a,view:o,controller:i}},n.get=function(e){return u[e]},n.setNode=b,n.getNode=p,n.merge=y,n.Controller=n.View=n.Model=void 0;var c,f,u=[];var i=function(){function e(){r(this,e),this.tree={},this.callbacks={setPre:[],setPost:[],change:[]}}return a(e,[{key:"init",value:function(){for(var e in this.callbacks)this.callbacks.hasOwnProperty(e)&&this.runCallbacks(e)}},{key:"setPre",value:function(e){for(var t=this.callbacks.setPre,n=t.length;n--;)e=t[n].call(this,e);return e}},{key:"setPost",value:function(e){this.runCallbacks("setPost")}},{key:"change",value:function(){this.runCallbacks("change")}},{key:"set",value:function(e,t){var n,r,o,a;if(d(e)){var i=this.setPre(y({},e));y(this.tree,i,function(e){return n=e})}else{var c=e;t=this.setPre((r={},o=c,a=t,o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r))[c],n=b(this.tree,c,t)}return n&&this.change(),this.setPost(),this}},{key:"get",value:function(e){return p(this.tree,e)}},{key:"on",value:function(e,t){var n=this.callbacks[e];return n&&n.unshift(t),this}},{key:"runCallbacks",value:function(e){for(var t=this.callbacks[e],n=t.length;n--;)t[n].call(this,this.tree)}},{key:"toJSON",value:function(){return this.tree}}]),e}();n.Model=i;var s=function(){function e(){r(this,e)}return a(e,[{key:"get",value:function(e){return this.el.querySelector(e)}},{key:"getAll",value:function(e){return this.el.querySelectorAll(e)}}]),e}();n.View=s;var l=function(){function e(){if(r(this,e),this.model=f,!c.el)throw new Error("View.el required!");this.view=c,c=f=null}return a(e,[{key:"bind",value:function(e){for(var t in e)if(e.hasOwnProperty(t))for(var n=this.view.el.querySelectorAll(t),r=n.length;r--;)e[t].call(this,n[r],this.model,this.view,this);return this}}]),e}();function d(e){return!(e!==Object(e)||e.nodeType||Array.isArray(e)||"function"==typeof e||e instanceof RegExp)}function b(e,t,a){var i=!1;return p(e,t,function(e,t,n){if(void 0===n){var r=e[t];a!==r&&(e[t]=a,i=!0)}else void 0===e[t]&&(e[t]=(o=n,Number(parseFloat(o))==o?[]:{}));var o}),i}function p(e,t,n){for(var r=t.split("."),o=e,a=0,i=r.length;a<i;a++){var c=r[a];if(n&&n(o,c,r[a+1]),void 0===o)break;o=o[c]}return o}function y(){var u,s=0,l=!0,e=function e(t,n){var r,o,a=n.length;t&&(o=d(n[0])?n[0]:{});for(var i=0;i<a;i++){if(r=n[i],!t&&null!=r){if(!o&&d(r)||r.nodeName){o=r;continue}if("boolean"==typeof r){l=r;continue}if("function"==typeof r){u=r;continue}if(!o)continue}for(var c in r)if(r.hasOwnProperty(c)){var f=r[c];l&&d(f)?o[c]=e(t+1,[o[c],f]):f!==o[c]&&(s++,o[c]=f)}}return o||{}}.apply(this,[0,arguments]);return u&&u(!!s),e}n.Controller=l},{}],3:[function(e,t,n){"use strict";var r=a(e("./modules/boot/boot")),o=a(e("./modules/todoForm/todoform"));function a(e){return e&&e.__esModule?e:{default:e}}(new r.default).then(function(){new o.default})},{"./modules/boot/boot":4,"./modules/todoForm/todoform":7}],4:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ready()}var t,n,r;return t=e,(n=[{key:"ready",value:function(){return new Promise(function(e,t){document.addEventListener("DOMContentLoaded",function(){/\w/.test(location.href)?e():t("Error")})})}}])&&o(t.prototype,n),r&&o(t,r),e}();n.default=r},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=r(e("../../lib/app")),i=r(e("../../json/data"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=f(this,u(t).call(this))).model.on("change",function(e){console.log("model changed from controller ",e),o.renderToDoItems()}),window.onmessage=function(e){o.registerOnMessageReceivedHandler(e)},o.bind({"#addBtn":function(e,t,n,r){e.onclick=function(e){o.addToDoItem()}}}),o.bind({"#debug":function(e,t,n,r){e.onclick=function(e){o.saveItems()}}}),o.bind({"#todolist":function(e,t,n,r){e.onchange=function(e){console.log(e,t)}}}),o.getItems(),window.parent.postMessage(i,"*"),o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,a.Controller),n=t,(r=[{key:"saveItems",value:function(){this.view.get(".debugArea").innerHTML=JSON.stringify(this.model.get("tasks"))}},{key:"getItems",value:function(){var e=JSON.parse('{"consumeRequest": {"key" : "days", "param": 90, "collectionName": "MovementTasks"}}');window.parent.postMessage(e,"*")}},{key:"registerOnMessageReceivedHandler",value:function(e){console.log("APP_ENV: incoming data",e),e.data&&(console.log("APP_ENV: data received in registerOnMessageReceivedHandler handler",e),e.data&&e.data.hasOwnProperty("save"),e.data&&e.data.hasOwnProperty("tasks")&&this.model.set({tasks:e.data.tasks}))}},{key:"createGuid",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}},{key:"addToDoItem",value:function(e){var t=this.view.get("#todo").value,n=this.createGuid();i.tasks.push({_id:n,title:t,state:"custom"}),window.parent.postMessage(i.tasks,"*"),this.view.get("#todo").value=""}},{key:"setModelState",value:function(e){var r=e.path.filter(function(e){return"LI"===e.tagName})[0].dataset;console.log(r),i.tasks.map(function(e,t,n){return e._id===r.id&&(e.state=r.state),e}),this.model.set({tasks:i.tasks})}},{key:"renderToDoItems",value:function(){var r=this,e=this.model.get("tasks");if(e){var t=Array.prototype.map.call(e,function(e){var t="";return"deleted"===e.state?"":("completed"===e.state&&(t="checked"),'<li data-state="'.concat(e.state?e.state:"default",'" data-id="').concat(e._id,'" class="').concat(t?"checked":"",'">\n                        <label class="checkbox-container ').concat(t,'"> \n                            <input type="checkbox" class="').concat(t?"checked":"",'">').concat(e.title,'<span class="checkmark"></span> \n                        </label><span class="close">×</span>\n                    </li>'))});this.view.get("#todolist").innerHTML=t.join("");for(var o=this.view.getAll("span.close"),n=function(n){o[n].onclick=function(e){e.preventDefault();var t=o[n].parentElement;t.style.display="none",t.dataset.state="deleted",r.setModelState(e)}},a=0;a<o.length;a++)n(a);var i=this.view.getAll("input");for(a=0;a<i.length;a++)i[a].onclick=function(e){console.log(e);e.target};for(var c=this.view.getAll("li"),f=0;f<c.length;f++)c[f].onclick=function(e){var t,n;"SPAN"!==e.srcElement.tagName&&("LABEL"===e.target.tagName&&(t=e.srcElement.parentElement,n=e.srcElement.children[0]),"SPAN"===e.target.tagName&&(t=e.srcElement.parentElement.parentElement,n=e.srcElement),"INPUT"===e.target.tagName&&(t=e.srcElement.parentElement.parentElement,n=e.srcElement),"LI"===e.target.tagName&&(n=(t=e.srcElement).children[0].children[0]),console.log(t,n),n.checked?(t.classList.add("checked"),t.dataset.state="completed"):(t.classList.remove("checked"),t.dataset.state="default"),r.setModelState(e))}}}}])&&c(n.prototype,r),o&&c(n,o),t}();n.default=l},{"../../json/data":1,"../../lib/app":2}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("../../lib/app"));o(e("../../json/data"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function n(){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=i(this,c(n).call(this))).on("change",function(e){console.log("model changed from base model: ",e)}),t.sanitize=function(e){for(var t in e)e.hasOwnProperty(t)&&"string"==typeof e[t]&&(e[t]=e[t].replace(/[^\w\s'!.,;]/g,""));return e},t.on("setPre",function(e){return t.sanitize(e)}),t.set({tasks:{}}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,r.Model),n}();n.default=u},{"../../json/data":1,"../../lib/app":2}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}}(e("../../lib/app")),o=c(e("./model")),a=c(e("./view")),i=c(e("./controller"));function c(e){return e&&e.__esModule?e:{default:e}}n.default=function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.add("ToDoForm",o.default,a.default,i.default)}},{"../../lib/app":2,"./controller":5,"./model":6,"./view":8}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}}(e("../../lib/app"));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=a(this,i(t).call(this))).el=document.getElementById("todosection"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r.View),t}();n.default=f},{"../../lib/app":2}]},{},[3]);
//# sourceMappingURL=main.js.map
